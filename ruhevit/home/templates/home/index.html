{% load static %}

<!DOCTYPE html>
<html lang="english">
    <head>
        <title>Ругевіт</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta property="twitter:card" content="summary_large_image" />

        <!-- Reset styles -->
        <style data-tag="reset-style-sheet">
            html { line-height: 1.15; }
            body { margin: 0; }
            * { box-sizing: border-box; border-width: 0; border-style: solid; -webkit-font-smoothing: antialiased; }
            p, li, ul, pre, div, h1, h2, h3, h4, h5, h6, figure, blockquote, figcaption { margin: 0; padding: 0; }
            button { background-color: transparent; }
            button, input, optgroup, select, textarea { font-family: inherit; font-size: 100%; line-height: 1.15; margin: 0; }
            button, select { text-transform: none; }
            button, [type="button"], [type="reset"], [type="submit"] { -webkit-appearance: button; color: inherit; }
            button::-moz-focus-inner, [type="button"]::-moz-focus-inner, [type="reset"]::-moz-focus-inner, [type="submit"]::-moz-focus-inner { border-style: none; padding: 0; }
            button:-moz-focus, [type="button"]:-moz-focus, [type="reset"]:-moz-focus, [type="submit"]:-moz-focus { outline: 1px dotted ButtonText; }
            a { color: inherit; text-decoration: inherit; }
            input { padding: 2px 4px; }
            img { display: block; }
            details { display: block; margin: 0; padding: 0; }
            summary::-webkit-details-marker { display: none; }
            [data-thq="accordion"] [data-thq="accordion-content"] { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-in-out; padding: 0; }
            [data-thq="accordion"] details[data-thq="accordion-trigger"][open] + [data-thq="accordion-content"] { max-height: 1000vh; }
            details[data-thq="accordion-trigger"][open] summary [data-thq="accordion-icon"] { transform: rotate(180deg); }
            html { scroll-behavior: smooth; }
        </style>
        <link rel="icon" href="{% static 'core/images/logo.svg' %}" type="image/x-icon">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <style data-tag="default-style-sheet">
        </style>
    </head>
    <body>
        <link rel="stylesheet" href="{% static 'home/style.css' %}">
        <div class="feed-mil">
            <!-- Header -->
            <header class="navbar">
                <div class="search-and-logo">
                    <h1 class="logo">Ругевіт</h1>
                    <div class="search" role="button" tabindex="0" onclick="activateSearch()" onkeypress="if(event.key === 'Enter') activateSearch()">
                      <i class="fa fa-search"></i>
                      <span class="search-text">Пошук</span>
                      <input type="text" class="search-input" placeholder="Пошук..." />
                    </div>
                </div>
                <div class="navbar-right">
                  <form action="{% url 'logout' %}" method="post" style="display: inline;">
                      {% csrf_token %}
                      <button type="submit" class="logout-button">Вийти</button>
                  </form>
                <a href="{% url 'profile_page' %}" class="profile-icon">
                    <img src="{% static 'home/images/profile_pic.svg' %}" alt="Profile" class="profile-page" />
                </a>
            </header>

            <!-- Секція "Ваші запити" (динамічний цикл) -->
            <section class="requests-block">
                <h2 class="requests-text">Ваші запити</h2>
                <div class="requests">
                    {% for req in user_requests %}
                        <article class="request">
                            <div class="request-pic">
                                <div class="request-pic-container">
                                    <img src="{% static 'home/images/icon.svg' %}" alt="Request Icon" class="landing-imageicon2" />
                                </div>
                            </div>
                            <div class="request-info">
                                <h3 class="request-title">{{ req.name }}</h3>
                                <div class="progress-container">
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 50%;"></div> <!-- Статичний приклад, можна підставити динаміку -->
                                    </div>
                                    <p class="progress-status">{{ req.get_status_display }}</p>
                                </div>
                                <div class="request-details">
                                    <div class="deadline-info">
                                        <p class="detail-label">термін виконання</p>
                                        <p class="detail-value">{{ req.created_at|date:"d.m.Y" }}</p>
                                    </div>
                                    <div class="volunteer-info">
                                        <p class="detail-label">волонтер</p>
                                        <p class="detail-value">
                                            {% if req.executor %}
                                                {{ req.executor.get_full_name }}
                                            {% else %}
                                                Не визначено
                                            {% endif %}
                                        </p>
                                    </div>
                                </div>
                                <div class="action-buttons">
                                    <button class="action-button contact">Сконтактувати</button>
                                    <button class="action-button confirm">Підтвердити статус</button>
                                </div>
                            </div>
                        </article>
                    {% empty %}
                        <p>У вас поки що немає запитів.</p>
                    {% endfor %}
                </div>
            </section>

            <!-- Секція "Пропозиції допомоги" (динамічний цикл) -->
            <section class="help-offers">
                <h2 class="section-title">Пропозиції допомоги</h2>
                <div class="filters-and-sorting">
                    <button class="filter-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                             class="bi bi-filter" viewBox="0 0 16 16">
                            <path d="M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5m-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5"/>
                        </svg>
                        <span class="filter-text">Фільтри</span>
                    </button>
                    <button class="sorting-button">
                        <span class="sort-text">&#8645;Сортування</span>
                    </button>
                </div>
                <div class="offers-container">
                    {% for offer in help_offers %}
                        <article class="offer-card">
                            <div class="offer-image">
                                <img src="{% static 'home/images/Image_icon.svg' %}" alt="Offer Icon" class="offer-icon">
                            </div>
                            <div class="offer-info">
                                <div class="author-info">
                                    <img src="{% static 'home/images/ellipse11103-otjg-200h.png' %}" alt="Author" class="landing-ellipse11" />
                                    <p class="author-name">{{ offer.owner.get_full_name }}</p>
                                </div>
                                <div class="offer-content">
                                    <h3 class="offer-title">{{ offer.name }}</h3>
                                    <p class="offer-description">{{ offer.description }}</p>
                                </div>
                                <div class="offer-tags">
                                    {# Якщо у тебе є зв’язок тегів, можна пройтися циклом: #}
                                    {# {% for tag in offer.tags.all %} #}
                                    {#   <span class="tag">{{ tag.name }}</span> #}
                                    {# {% endfor %} #}
                                </div>
                                <button class="details-button">Детальніше</button>
                            </div>
                        </article>
                    {% empty %}
                        <p>Наразі немає пропозицій.</p>
                    {% endfor %}
                </div>
            </section>
        </div>
        <script src="{% static 'home/script.js' %}" defer></script>
    </body>
</html>
