{% extends "core/base.html" %}

{% block title %}Мої запити{% endblock %}

{% block content %}
<h2>Мої запити</h2>

<h3>Створити або оновити запит</h3>
<form method="post" enctype="multipart/form-data" class="request-form">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="button">Зберегти запит</button>
</form>

<div class="card-grid">
    {% for req in requests %}
        {% if req.owner == request.user %}
            <div class="card">
                <h3>{{ req.name }}</h3>
                <div class="meta">
                    Статус: <strong>{{ req.get_status_display }}</strong><br>
                    Власник: {{ req.owner.username }}<br>
                    Пріоритет: {{ req.get_priority_display }}<br>
                    Локація: {{ req.get_location_display }}
                </div>
                <p>{{ req.description|truncatewords:20 }}</p>
                <div class="tags">
                    <span class="tag">{{ req.get_type_display }}</span>
                    <span class="tag">{{ req.get_priority_display }}</span>
                    <span class="tag">{{ req.get_location_display }}</span>
                </div>
                <a href="#" class="button">Детальніше</a>
            </div>
        {% endif %}
    {% empty %}
        <p>Наразі немає запитів.</p>
    {% endfor %}
</div>
{% endblock %}